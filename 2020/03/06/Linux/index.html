<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="生活,旅行,思考,代码,博客" />
   
  <meta name="description" content="一生努力" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Linux |  0Rld
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

<link rel="alternate" href="/atom.xml" title="0Rld" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

</html>
<script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-Linux" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Linux
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2020/03/06/Linux/" class="article-date">
  <time datetime="2020-03-06T11:50:00.016Z" itemprop="datePublished">2020-03-06</time>
</a>
      
      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">9.4k字</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">44分钟</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    
    <div class="article-entry" itemprop="articleBody">
      


      

      
      <hr>
<p>title: Linux<br>date: 2020-03-06 19:49:59<br>tags: Linux<br>categories: Linux学习</p>
<hr>
<h2 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a><strong>Linux常用命令</strong></h2><p>有些命令学了老是忘，这里就记录一些自己常用的命令~</p>
<table>
<thead>
<tr>
<th align="center">more -5 proxy.py</th>
<th align="center">每5行为1页，按空格键切换下一页，回车键为下一行</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>ls -lha | more -5</strong></td>
<td align="center"><strong>按q即可退出</strong></td>
</tr>
<tr>
<td align="center"><strong>echo hello &gt; kail.txt</strong></td>
<td align="center"><strong>直接覆盖原本的内容</strong></td>
</tr>
<tr>
<td align="center"><strong>echo hello &gt;&gt;kail.txt</strong></td>
<td align="center"><strong>追加在原本的内容上</strong></td>
</tr>
<tr>
<td align="center"><strong>find  /root  -name  proxy.py</strong></td>
<td align="center"><strong>搜索root目录下，名为proxy.py的文件</strong></td>
</tr>
<tr>
<td align="center"><strong>find .  -ctime  -20</strong></td>
<td align="center"><strong>搜索当前目录下，最近20天内更新过的所有文件</strong></td>
</tr>
<tr>
<td align="center"><strong>find .  -cmin   -20</strong></td>
<td align="center"><strong>搜索当前目录下，最近20分钟内更新过的所有文件</strong></td>
</tr>
</tbody></table>
<p><strong>find  .  -name  ‘*.py’   -a   -size  +8   -a -type f  #注意加’’表示转义</strong><br><strong>-type 文件类型   f文件   d目录（文件夹）   l软链接文件（Link</strong><br><strong>-a and 同时满足 -o or 或者，满足其中一个即可</strong> </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">find  .  -name  '*.py'   -a   -size  +8   -a -type f  #注意加''表示转义</span><br><span class="line">-type 文件类型   f文件   d目录（文件夹）   l软链接文件（Link </span><br><span class="line">-a and 同时满足 -o or 或者，满足其中一个即可</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th align="center"><strong>mv proxy.py    ~/desktop/kaillinux/</strong></th>
<th align="center"><strong>移动文件到指定目录下，这是剪切</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>cp -r kaillinux/  ~</strong></td>
<td align="center"><strong>复制当前下的目录kaillinux到~目录下，注意需要加-r（mv可不加）</strong></td>
</tr>
<tr>
<td align="center"><strong>mv proxy.py ssh_proxy.py</strong></td>
<td align="center"><strong>重命名为ssh_proxy.py</strong></td>
</tr>
<tr>
<td align="center"><strong>cat -b xx.txt  /  cat -n xx.txt</strong></td>
<td align="center"><strong>显示行号 去除空行 /  显示行号 包含空行</strong></td>
</tr>
</tbody></table>
<p>####—-cat—-####</p>
<h1 id><a href="#" class="headerlink" title></a></h1><p>#</p>
<p>####—-ps、kill—-####<br>ps -aux #显示所有包含其他使用者的行程<br>ps -ef #显示所有命令，连带命令行<br>ps -u root #显示 root 进程用户信息 </p>
<p>ps aux |grep tcp #查找对应服务的进程<br>#找到对应的PID以后<br>kill -9 进程id</p>
<p>#kill只可杀死单个进程；pkill和killall可杀死多个进程<br>#直接杀死程序(httpd为程序名)<br>pkill -9  httpd</p>
<h2 id="操作系统信息收集"><a href="#操作系统信息收集" class="headerlink" title="操作系统信息收集"></a>操作系统信息收集</h2><p>查看服务器版本：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/issue</span><br><span class="line">cat /etc/*<span class="literal">-release</span></span><br><span class="line">cat /etc/lsb<span class="literal">-release</span> <span class="comment"># 基于 Debian</span></span><br><span class="line">cat /etc/redhat<span class="literal">-release</span> <span class="comment"># 基于 Redhat</span></span><br></pre></td></tr></table></figure>

<p>查看内核的版本信息？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /proc/version</span><br><span class="line">uname -a</span><br><span class="line">uname -mrs</span><br><span class="line">rpm -q kernel</span><br><span class="line">dmesg | grep Linux</span><br><span class="line">ls /boot | grep vmlinuz-</span><br></pre></td></tr></table></figure>



<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>netstat -tulpn</td>
<td>在 Linux 中显示对应了进程ID（PID）的网络端口。</td>
</tr>
<tr>
<td>watch ss -stplu</td>
<td>通过套接字实时观察 TCP, UDP 端口。</td>
</tr>
<tr>
<td>lsof -i</td>
<td>显示确认了的连接。</td>
</tr>
<tr>
<td>macchanger -m MACADDR INTR</td>
<td>在 KALI Linux 上修改 MAC 地址。</td>
</tr>
<tr>
<td>ifconfig eth0 192.168.2.1/24</td>
<td>在 Linux 中设置 ID 地址。</td>
</tr>
<tr>
<td>ifconfig eth0:1 192.168.2.3/24</td>
<td>在 Linux 中向现有的网络接口添加 IP 地址。</td>
</tr>
<tr>
<td>ifconfig eth0 hw ether MACADDR</td>
<td>使用 ifconfig 修改 Linux 中的 MAC 地址。</td>
</tr>
<tr>
<td>ifconfig eth0 mtu 1500</td>
<td>在 Linux 中使用 ifconfig 修改 MTU 的大小，将 1500 改为你想要的 MTU。</td>
</tr>
<tr>
<td>dig -x 192.168.1.1</td>
<td>对 IP 地址进行反向查找。</td>
</tr>
<tr>
<td>host 192.168.1.1</td>
<td>在一个 IP 地址上进行反向查找，适用于没有安装 dig 的情况。</td>
</tr>
<tr>
<td>dig @192.168.2.2 domain.com -t AXFR</td>
<td>使用 dig 执行一次 DNS 区域传输。</td>
</tr>
<tr>
<td>host -l domain.com nameserver</td>
<td>使用 host 执行一次 DNS 区域传输。</td>
</tr>
<tr>
<td>nbtstat -A x.x.x.x</td>
<td>获取 IP 地址对应的域名。</td>
</tr>
<tr>
<td>ip addr add 192.168.2.22/24 dev eth0</td>
<td>向 Linux 添加一个隐藏的 IP 地址，在执行 ifconfig 命令时不会显示这个 IP 地址。</td>
</tr>
<tr>
<td>tcpkill -9 host google.com</td>
<td>阻止从主机访问 google.com。</td>
</tr>
<tr>
<td>echo “1” &gt; /proc/sys/net/ipv4/ip_forward</td>
<td>启用 IP 转发，将 Linux 盒子变成一个路由器——这样就方便通过这个盒子来进行路由流量的控制。</td>
</tr>
<tr>
<td>echo “8.8.8.8” &gt; /etc/resolv.conf</td>
<td>使用 Google 的 DNS。</td>
</tr>
</tbody></table>
<p>对于本地的枚举检查很有用。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>whoami</td>
<td>显示 Linux 上当前已登录用户。</td>
</tr>
<tr>
<td>id</td>
<td>向用户显示当前已登录的用户和组。</td>
</tr>
<tr>
<td>last</td>
<td>显示最后一次登陆的用户。</td>
</tr>
<tr>
<td>mount</td>
<td>显示已挂载的驱动。</td>
</tr>
<tr>
<td>df -h</td>
<td>用人类可读的输出显示磁盘使用情况。</td>
</tr>
<tr>
<td>echo “user:passwd” | chpasswd</td>
<td>用一行命令重置密码。</td>
</tr>
<tr>
<td>getent passwd</td>
<td>列出 Linux 上的用户。</td>
</tr>
<tr>
<td>strings /usr/local/bin/blah</td>
<td>显示非文本文件的内容，例如：一个二进制文件里面有什么。</td>
</tr>
<tr>
<td>uname -ar</td>
<td>显示运行中的内核版本。</td>
</tr>
<tr>
<td>PATH=$PATH:/my/new-path</td>
<td>添加一个新的路径，方便进行本地文件系统（FS）操作。</td>
</tr>
<tr>
<td>history</td>
<td>显示用户在之前执行的 bash 脚本历史记录，还有敲入的命令。</td>
</tr>
</tbody></table>
<h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><p><strong>基于 Redhat / CentOS / RPM 的发行版</strong></p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>cat /etc/redhat-release</td>
<td>显示 Redhat / CentOS 版本号。</td>
</tr>
<tr>
<td>rpm -qa</td>
<td>在基于 RPM 的 Linux 上列出所有已经安装上的 RPM 包。</td>
</tr>
<tr>
<td>rpm -q –changelog openvpn</td>
<td>检查已安装的 RPM 是否针对 CVE 打了补丁，可以用 grep 命令过滤出跟 CVE 有关的输出。LeoXu</td>
</tr>
</tbody></table>
<h2 id="YUM-命令"><a href="#YUM-命令" class="headerlink" title="YUM 命令"></a><strong>YUM 命令</strong></h2><p>基于 RPM 的系统使用了包管理器, 你可以用这些命令获取到有关已安装包或者其它工具的有用信息。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>yum update</td>
<td>使用 YUM 更新所有的 RPM 包，也会显示出哪些已经过时了。</td>
</tr>
<tr>
<td>yum update httpd</td>
<td>更新单独的包，在此例中是 HTTPD (Apache)。</td>
</tr>
<tr>
<td>yum install package</td>
<td>使用 YUM 安装一个包。</td>
</tr>
<tr>
<td>yum –exclude=package kernel* update</td>
<td>在使用 YUM 时将一个包排除在外不更新。</td>
</tr>
<tr>
<td>yum remove package</td>
<td>使用 YUM 删除包。</td>
</tr>
<tr>
<td>yum erase package</td>
<td>使用 YUM 删除包。</td>
</tr>
<tr>
<td>yum list package</td>
<td>列出有关 yum 包的信息。</td>
</tr>
<tr>
<td>yum provides httpd</td>
<td>显示一个包是的用途，例如： Apache HTTPD Server。</td>
</tr>
<tr>
<td>yum info httpd</td>
<td>显示包信息，架构，版本等信息。</td>
</tr>
<tr>
<td>yum localinstall blah.rpm</td>
<td>使用 YUM 来安装本地 RPM， 从资源库进行安装。</td>
</tr>
<tr>
<td>yum deplist package</td>
<td>显示包的提供方信息。</td>
</tr>
<tr>
<td>yum list installed | more</td>
<td>列出所有已安装的包。</td>
</tr>
<tr>
<td>yum grouplist | more</td>
<td>显示所有的 YUM 分组。</td>
</tr>
<tr>
<td>yum groupinstall ‘Development Tools’</td>
<td>安装 YUM 分组。</td>
</tr>
</tbody></table>
<h4 id="-2"><a href="#-2" class="headerlink" title></a></h4><p>基于 Debian / Ubuntu / .deb 的发行版 </p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>cat /etc/debian_version</td>
<td>显示 Debian 版本号。</td>
</tr>
<tr>
<td>cat /etc/*-release</td>
<td>显示 Ubuntu 版本号。</td>
</tr>
<tr>
<td>dpkg -l</td>
<td>在基于 Debian / .deb 的 Linux 发行版上列出所有已安装的包。</td>
</tr>
</tbody></table>
<h2 id="Linux-用户管理"><a href="#Linux-用户管理" class="headerlink" title="Linux 用户管理"></a><strong>Linux 用户管理</strong></h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>useradd new-user</td>
<td>创建一个新的 Linux 用户。</td>
</tr>
<tr>
<td>passwd username</td>
<td>重置 Linux 用户密码, 如果你是 root 用户，只要输入密码就行了。</td>
</tr>
<tr>
<td>deluser username</td>
<td>删除一个 Linux 用户。</td>
</tr>
</tbody></table>
<h3 id="-3"><a href="#-3" class="headerlink" title></a></h3><h2 id="Linux-解压缩命令"><a href="#Linux-解压缩命令" class="headerlink" title="Linux 解压缩命令"></a><strong>Linux 解压缩命令</strong></h2><p>如何在 Linux 上解析不同的压缩包 (tar, zip, gzip, bzip2 等等) ，以及其它的一些用来在压缩包中进行搜索等操作的小技巧。</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>unzip archive.zip</td>
<td>在 Linux 上提取 zip 包中的文件。</td>
</tr>
<tr>
<td>zipgrep *.txt archive.zip</td>
<td>在一个 zip 压缩包中搜索。</td>
</tr>
<tr>
<td>tar xf archive.tar</td>
<td>在 Linux 上提取 tar 包中的文件。</td>
</tr>
<tr>
<td>tar xvzf archive.tar.gz</td>
<td>在 Linux 上提取 tar.gz 包中的文件。</td>
</tr>
<tr>
<td>tar xjf archive.tar.bz2</td>
<td>在 Linux 上提取 tar.bz2 包中的文件。</td>
</tr>
<tr>
<td>tar ztvf file.tar.gz | grep blah</td>
<td>在一个 tar.gz 文件中搜索。</td>
</tr>
<tr>
<td>gzip -d archive.gz</td>
<td>在 Linux 上提取 gzip 中的文件。</td>
</tr>
<tr>
<td>zcat archive.gz</td>
<td>在 Linux 以不解压缩的方式读取一个 gz 文件。</td>
</tr>
<tr>
<td>zless archive.gz</td>
<td>用较少的命令实现对 .gz 压缩包相同的功能。</td>
</tr>
<tr>
<td>zgrep ‘blah’ /var/log/maillog*.gz</td>
<td>在 Linux 上对 .gz 压缩包里面的内容执行搜索，比如搜索被压缩过的日志文件。</td>
</tr>
<tr>
<td>vim file.txt.gz</td>
<td>使用 vim 读取 .txt.gz 文件（我个人的最爱）。</td>
</tr>
<tr>
<td>upx -9 -o output.exe input.exe</td>
<td>在 Linux 上使用 UPX 压缩 .exe 文件。</td>
</tr>
</tbody></table>
<h2 id="Linux-压缩命令"><a href="#Linux-压缩命令" class="headerlink" title="Linux 压缩命令"></a><strong>Linux 压缩命令</strong></h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>zip -r file.zip /dir/*</td>
<td>在 Linux 上创建一个 .zip 文件。</td>
</tr>
<tr>
<td>tar cf archive.tar files</td>
<td>在 Linux 上创建一个 tar 文件。</td>
</tr>
<tr>
<td>tar czf archive.tar.gz files</td>
<td>在 Linux 上创建一个 tar.gz 文件。</td>
</tr>
<tr>
<td>tar cjf archive.tar.bz2 files</td>
<td>在 Linux 上创建一个 tar.bz2 文件。</td>
</tr>
<tr>
<td>gzip file</td>
<td>在 Linux 上创建一个 .gz 文件。</td>
</tr>
</tbody></table>
<h3 id="-4"><a href="#-4" class="headerlink" title></a></h3><h2 id="Linux-文件命令"><a href="#Linux-文件命令" class="headerlink" title="Linux 文件命令"></a><strong>Linux 文件命令</strong></h2><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>df -h blah</td>
<td>在 Linux 上显示文件/目录的大小。</td>
</tr>
<tr>
<td>diff file1 file2</td>
<td>在 Linux 上比对/显示两个文件之间的差别。</td>
</tr>
<tr>
<td>md5sum file</td>
<td>在 Linux 上生成 MD5 摘要。</td>
</tr>
<tr>
<td>md5sum -c blah.iso.md5</td>
<td>在 Linux 上检查文件的 MD5 摘要，这里假设文件和 .md5 处在相同的路径下。</td>
</tr>
<tr>
<td>file blah</td>
<td>在 Linux 上查找出文件的类型，也会将文件是 32 还是 64 位显示出来。</td>
</tr>
<tr>
<td>dos2unix</td>
<td>将 Windows 的行结束符转成 Unix/Linux 的。</td>
</tr>
<tr>
<td>base64 &lt; input-file &gt; output-file</td>
<td>对输入文件进行 Base64 编码，然后输出一个叫做 output-file 的 Base64 编码文件。</td>
</tr>
<tr>
<td>base64 -d &lt; input-file &gt; output-file</td>
<td>对输入文件进行 Base64 解码，然后输出一个叫做 output-file 的 Base64 解码文件。</td>
</tr>
<tr>
<td>touch -r ref-file new-file</td>
<td>使用来自于引用文件的时间戳数据创建一个新文件，放上 -r 以简单地创建一个文件。</td>
</tr>
<tr>
<td>rm -rf</td>
<td>不显示确认提示就删除文件和目录。</td>
</tr>
</tbody></table>
<h3 id="-5"><a href="#-5" class="headerlink" title></a></h3><h3 id="Misc-命令"><a href="#Misc-命令" class="headerlink" title="Misc 命令"></a>Misc 命令</h3><table>
<thead>
<tr>
<th>命令</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>init 6</td>
<td>从命令行重启 Linux 。</td>
</tr>
<tr>
<td>gcc -o output.c input.c</td>
<td>编译 C 代码。</td>
</tr>
<tr>
<td>gcc -m32 -o output.c input.c</td>
<td>交叉编译 C 代码，在 64 位 Linux 上将编译出 32 位的二进制文件。</td>
</tr>
<tr>
<td>unset HISTORYFILE</td>
<td>关闭 bash 历史日志记录功能。</td>
</tr>
<tr>
<td>rdesktop X.X.X.X</td>
<td>从 Linux 连接到 RDP 服务器。</td>
</tr>
<tr>
<td>kill -9 $$</td>
<td>关掉当前的会话。</td>
</tr>
<tr>
<td>chown user:group blah</td>
<td>修改文件或者目录的所有者。</td>
</tr>
<tr>
<td>chown -R user:group blah</td>
<td>修改文件或者目录，以及目录下面文件/目录的拥有者 —— 递归执行 chown。</td>
</tr>
<tr>
<td>chmod 600 file</td>
<td>修改文件/目录的权限设定, 详情见 <a href="#linux-file-system-permissions">Linux 文件系统权限</a> 。</td>
</tr>
</tbody></table>
<h3 id="Linux-文件系统权限"><a href="#Linux-文件系统权限" class="headerlink" title="Linux 文件系统权限"></a>Linux 文件系统权限</h3><table>
<thead>
<tr>
<th>取值</th>
<th>意义</th>
</tr>
</thead>
<tbody><tr>
<td>777</td>
<td>rwxrwxrwx 没有限制，完全可读可写可执行（RWX），用户可以做任何事情。</td>
</tr>
<tr>
<td>755</td>
<td>rwxr-xr-x 拥有者可完全访问，其他人只能读取和执行文件。</td>
</tr>
<tr>
<td>700</td>
<td>rwx—— 拥有者可完全访问，其他人都不能访问。</td>
</tr>
<tr>
<td>666</td>
<td>rw-rw-rw- 所有人可以读取和写入，但不可执行。</td>
</tr>
<tr>
<td>644</td>
<td>rw-r–r– 拥有者可以读取和写入，其他人只可以读取。</td>
</tr>
<tr>
<td>600</td>
<td>rw——- 拥有者可以读取和写入，其他人都不能访问。</td>
</tr>
</tbody></table>
<h3 id="-6"><a href="#-6" class="headerlink" title></a></h3><h3 id="Linux-文件系统的渗透测试备忘录"><a href="#Linux-文件系统的渗透测试备忘录" class="headerlink" title="Linux 文件系统的渗透测试备忘录"></a>Linux 文件系统的渗透测试备忘录</h3><table>
<thead>
<tr>
<th>目录</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>/ 也被称为“斜杠”或者根。</td>
</tr>
<tr>
<td>/bin</td>
<td>由系统、系统管理员以及用户共享的通用程序。</td>
</tr>
<tr>
<td>/boot</td>
<td>Boot 文件, 启动加载器(grub), 内核, vmlinuz</td>
</tr>
<tr>
<td>/dev</td>
<td>包含了对系统设备、带有特殊属性的文件的引用。</td>
</tr>
<tr>
<td>/etc</td>
<td>重要的系统配置文件。</td>
</tr>
<tr>
<td>/home</td>
<td>系统用户的主目录。</td>
</tr>
<tr>
<td>/lib</td>
<td>库文件，包括系统和用户都需要的所有类型的程序的文件。</td>
</tr>
<tr>
<td>/lost+found</td>
<td>文件操作失败会被保存在这里。</td>
</tr>
<tr>
<td>/mnt</td>
<td>外部文件系统的标准挂载点。</td>
</tr>
<tr>
<td>/media</td>
<td>外部文件系统（或者某些发行版）的挂载点。</td>
</tr>
<tr>
<td>/net</td>
<td>整个远程文件系统的标准挂载点 —— nfs。</td>
</tr>
<tr>
<td>/opt</td>
<td>一般都是包含一些附加的或者第三方软件。</td>
</tr>
<tr>
<td>/proc</td>
<td>一个包含了系统资源相关信息的虚拟文件系统。</td>
</tr>
<tr>
<td>/root</td>
<td>root 用户的主目录。</td>
</tr>
<tr>
<td>/sbin</td>
<td>由系统和系统管理员来使用的程序。</td>
</tr>
<tr>
<td>/tmp</td>
<td>供系统使用的临时空间，重启时会被清空。</td>
</tr>
<tr>
<td>/usr</td>
<td>供所有用户相关程序使用的程序、库、文档等等。</td>
</tr>
<tr>
<td>/var</td>
<td>存储所有由用户创建的可变文件和临时文件，比如日志文件、邮件队列、后台打印程序，Web服务器，数据库等等。</td>
</tr>
</tbody></table>
<h3 id="-7"><a href="#-7" class="headerlink" title></a></h3><h3 id="Linux-中有趣的文件-目录"><a href="#Linux-中有趣的文件-目录" class="headerlink" title="Linux 中有趣的文件/目录"></a>Linux 中有趣的文件/目录</h3><p>如果你想尝试进行特权升级/执行后期开发，这些都是你值得一瞧的命令。</p>
<table>
<thead>
<tr>
<th>路径</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>/etc/passwd</td>
<td>包含了本地 Linux 的用户。</td>
</tr>
<tr>
<td>/etc/shadow</td>
<td>包含了哈希过的本地账户密码。</td>
</tr>
<tr>
<td>/etc/group</td>
<td>包含了本地账户分组。</td>
</tr>
<tr>
<td>/etc/init.d/</td>
<td>包含了服务网初始化脚本 – 具体都安装了些啥应该值得一瞧。</td>
</tr>
<tr>
<td>/etc/hostname</td>
<td>系统的 hostname。</td>
</tr>
<tr>
<td>/etc/network/interfaces</td>
<td>网络接口。</td>
</tr>
<tr>
<td>/etc/resolv.conf</td>
<td>系统的 DNS 服务。</td>
</tr>
<tr>
<td>/etc/profile</td>
<td>系统的环境变量。</td>
</tr>
<tr>
<td>~/.ssh/</td>
<td>SSH 密钥。</td>
</tr>
<tr>
<td>~/.bash_history</td>
<td>用户的 bash 历史日志。</td>
</tr>
<tr>
<td>/var/log/</td>
<td>Linux 系统的日志文件一般就被存放在这里。</td>
</tr>
<tr>
<td>/var/adm/</td>
<td>UNIX 系统的日志文件一般就被存在在这里。</td>
</tr>
<tr>
<td>/var/log/apache2/access.log/var/log/httpd/access.log</td>
<td>Apache 访问日志文件通常的存在路径。</td>
</tr>
<tr>
<td>/etc/fstab</td>
<td>挂载的文件系统。</td>
</tr>
</tbody></table>
<p>ps -a</p>
<p>ps -ef</p>
<p>kill -9 PID</p>
<hr>
<h2 id="docker常用命令"><a href="#docker常用命令" class="headerlink" title="docker常用命令"></a><strong>docker常用命令</strong></h2><p>1 <strong>docker images</strong> 查看镜像信息列表 镜像是静态的</p>
<p>2 <strong>docker ps -a</strong> 查看运行中的所有容器</p>
<p>3 <strong>docker search [images]:[version]</strong>从dockerhub查询指定镜像</p>
<p>4 <strong>docker pull [images]:[version]</strong>从dockerhub拉取指定镜像</p>
<p>4 <strong>docker run -p 8000:80 -tdi  [imageID]</strong> 后台启动docker,并指定宿主机端口和docker映射端口。</p>
<p> <strong>-i:</strong>以交互模式运行容器，通常与 -t 同时使用；</p>
<p> <strong>-d:</strong>后台运行容器，并返回容器ID；</p>
<p><strong>-t:</strong>为容器重新分配一个伪输入终端，通常与 -i 同时使用；</p>
<p>5 当镜像通过run 启动后，便会载入到一个动态的container(容器)中运行，此时若需要进入终端交互模式：</p>
<p><strong>sudo docker exec -it [containerID] /bin/bash</strong></p>
<p>交互模式中，使用 ctrl+p+q退出交互 保持运行,使用 exit命令退出并停止容器。</p>
<p>6 在容器非交互模式下，通过docker start/stop 命令来启动/停止已部署的容器服务。</p>
<p>7 <strong>docker rm [containerID]</strong> 删除容器</p>
<p>8 <strong>docker rmi [imageID]</strong> 删除镜像</p>
<p>9 <strong>docker cp [YourHostFilePath] [containerID]:[DockerPath]</strong> 将宿主机内的指定文件传输至容器内部的指定地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service docker start</span><br><span class="line">cd &#x2F;vulhub&#x2F;activemq&#x2F;CVE-2015-5254</span><br><span class="line">docker-compose up -d  #构建漏洞环境，这个命令包括了docker-compose build</span><br></pre></td></tr></table></figure>

<p>5、环境关闭</p>
<p>docker-compose down</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p root</span><br></pre></td></tr></table></figure>

<p>dpkg -i </p>
<hr>
<h2 id="进程控制编程"><a href="#进程控制编程" class="headerlink" title="进程控制编程"></a><strong>进程控制编程</strong></h2><h3 id="fork"><a href="#fork" class="headerlink" title="fork()"></a><strong>fork()</strong></h3><p><strong>getpid / getppid</strong> </p>
<p><strong>getpid:</strong>得到当前进程的PID</p>
<p><strong>getppid:</strong>得到当前进程的父进程的PID</p>
<p>fork实例代码如下：</p>
<p>父子进程的执行顺序—-不一定，谁抢到cpu谁执行</p>
<p>父进程会生成 n(n+1)/2+1个子进程,N 为循环次数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"--------i = %d\n"</span>, i);</span><br><span class="line">	&#125;</span><br><span class="line">	pid = fork(); <span class="comment">//从此开始生成子进程，父子都会从此返回，根据返回值区分父子进程</span></span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">-1</span> ) &#123;</span><br><span class="line">        perror(<span class="string">"fork"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123; <span class="comment">//父进程返回子进程的PID</span></span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"I'm parent pid = %d, parentID = %d\n"</span>, getpid(), getppid());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;  <span class="comment">//子进程返回0</span></span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"child  pid = %d, parentID=%d \n"</span>, getpid(), getppid());</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">4</span>; ++i)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>, i);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# ./fork</span><br><span class="line">--------i = 0</span><br><span class="line">--------i = 1</span><br><span class="line">--------i = 2</span><br><span class="line">--------i = 3</span><br><span class="line">I'm parent pid = 10345, parentID = 1426</span><br><span class="line">i = 0</span><br><span class="line">i = 1</span><br><span class="line">i = 2</span><br><span class="line">i = 3</span><br><span class="line">child  pid = 10346, parentID=10345 </span><br><span class="line">i = 0</span><br><span class="line">i = 1</span><br><span class="line">i = 2</span><br><span class="line">i = 3</span><br></pre></td></tr></table></figure>



<p>父进程子进程是单独执行的，但2者会共享文件</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>, n = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span> counter=<span class="number">200</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (fork() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (i == <span class="number">0</span>) </span><br><span class="line">        &#123;</span><br><span class="line">        counter+=<span class="number">200</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"first process, pid = %d \n"</span>, getpid());</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"--counter = %d \n"</span>,counter);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">1</span>) </span><br><span class="line">        &#123;</span><br><span class="line">        counter+=<span class="number">200</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"second process, pid = %d \n"</span>, getpid());</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"--counter = %d \n"</span>,counter);</span><br><span class="line">        &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="keyword">if</span> (i == <span class="number">2</span>) </span><br><span class="line">        &#123;</span><br><span class="line">        counter+=<span class="number">200</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"third process, pid = %d \n"</span>, getpid());</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"--counter = %d \n"</span>,counter);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (i == n) </span><br><span class="line">        &#123;</span><br><span class="line">        counter+=<span class="number">400</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"parent process, pid = %d \n"</span>, getpid());</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"--counter = %d \n"</span>,counter);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>运行结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# ./fork2</span><br><span class="line">first process, pid = 10523 </span><br><span class="line">--counter = 400 </span><br><span class="line">parent process, pid = 10522 </span><br><span class="line">--counter = 600 </span><br><span class="line">second process, pid = 10524 </span><br><span class="line">--counter = 400 </span><br><span class="line">third process, pid = 10525 </span><br><span class="line">--counter = 400</span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;fcntl.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">pid_t</span> pid, wpid;</span><br><span class="line">	<span class="keyword">int</span> status;</span><br><span class="line">	<span class="keyword">int</span> fd=<span class="built_in">open</span>(<span class="string">"hello"</span>,O_RDWR|O_CREAT,<span class="number">0777</span>); <span class="comment">//打开hello文件，不存就就创建它</span></span><br><span class="line">    <span class="comment">//O_RDWR | O_CREAT  参数表示创建该文件，且以读写的方式打开   0777定义创建文件的权限，文件的权限都是8进制数（以0开头的数），0777等价于777</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"open error\n"</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">	pid = fork();</span><br><span class="line">	<span class="keyword">if</span>(pid == <span class="number">-1</span>)&#123;</span><br><span class="line">		perror(<span class="string">"fork error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;		<span class="comment">//son</span></span><br><span class="line">		sleep(<span class="number">1</span>);</span><br><span class="line">		<span class="keyword">char</span> buf[<span class="number">1024</span>];</span><br><span class="line">		lseek(fd,<span class="number">0</span>,SEEK_SET);</span><br><span class="line">		<span class="keyword">int</span> len=<span class="built_in">read</span>(fd,buf,<span class="keyword">sizeof</span>(buf));</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%s\n"</span>, buf);</span><br><span class="line">		<span class="built_in">close</span>(fd);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">char</span> *p=<span class="string">"aaaaaaaaaaaaaabbbbbbbbbbbbbcccccccccccccccc"</span>;</span><br><span class="line">		<span class="built_in">write</span>(fd,p,<span class="built_in">strlen</span>(p)+<span class="number">1</span>);</span><br><span class="line">		<span class="built_in">close</span>(fd);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="exec函数族"><a href="#exec函数族" class="headerlink" title="exec函数族"></a><strong>exec函数族</strong></h3><p><strong>让父子进程执行不相干的操作</strong></p>
<p><strong>如果函数执行成功，不返回值</strong></p>
<p>如果执行失败，打印错误信息，退出当前进程</p>
<p><strong>本质是替换代码块.text中的内容，无需再创建新进程</strong></p>
<p>execl ：执行ls -lah 的时候，就替换了后续的for循环，当ls执行结束的时候，就直接推出了，所以这里for循环仅执行1次</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">....</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">print</span>(xxxxx);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pid_t</span> pid=fork(); <span class="comment">//创建子进程</span></span><br><span class="line"><span class="keyword">if</span>(pid==<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">	execl(<span class="string">"/bin/ls"</span>,<span class="string">"666"</span>,<span class="string">"-lah"</span>,<span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"++++++ i=%d\n"</span>,i);   <span class="comment">///仅执行一次</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">    pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">-1</span> ) &#123;</span><br><span class="line">        perror(<span class="string">"fork"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"I'm parent pid = %d, parentID = %d\n"</span>, getpid(), getppid());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;</span><br><span class="line">        sleep(<span class="number">3</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"i am child\n"</span>);</span><br><span class="line">        execl(<span class="string">"/bin/ls"</span>, <span class="string">"ls"</span>, <span class="string">"-l"</span>,  <span class="literal">NULL</span>);<span class="comment">//一般执行自己写的程序，参数写完后加NULL</span></span><br><span class="line">        perror(<span class="string">"exec"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"-------finish...%d\n"</span>, getpid());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# ./execl_1 </span><br><span class="line">I'm parent pid = 11329, parentID = 1426</span><br><span class="line">-------finish...11329</span><br><span class="line">root@kali:~/桌面# i am child</span><br><span class="line">总用量 56504</span><br><span class="line">drwxrwxrwx  2 root root     4096 4月  22 17:59 chj</span><br><span class="line">-rwxr-xr-x  1 root root    17024 5月   1 21:45 execl_1</span><br><span class="line">-rw-r--r--  1 root root      512 5月   1 21:45 execl_1.c</span><br><span class="line">-rwxr-xr-x  1 root root     3826 11月 14 04:55 firefox-esr.desktop</span><br><span class="line">-rwxr-xr-x  1 root root    16872 4月  20 21:12 fork</span><br><span class="line">-rwxr-xr-x  1 root root    16720 4月  20 21:39 fork2</span><br><span class="line">-rw-r--r--  1 root root      796 4月  20 21:39 fork2.c</span><br><span class="line">-rwxr-xr-x  1 root root    17120 5月   1 20:26 fork3</span><br><span class="line">-rw-r--r--  1 root root      679 5月   1 20:25 fork3.c</span><br><span class="line">-rw-r--r--  1 root root      527 4月  20 21:12 fork.c</span><br><span class="line">-rwxr-xr-x  1 root root     8430 4月   2 20:55 google-chrome.desktop</span><br><span class="line">-rwxr-xr-x  1 root root       44 5月   1 20:28 hello</span><br><span class="line">-rw-r--r--  1 root root      181 4月  21 20:02 test.php</span><br></pre></td></tr></table></figure>



<p>孤儿进程：</p>
<p>父进程结束，子进程还在，则子进程的父进程编程init进程</p>
<p>目的：为了释放子进程占用的系统资源</p>
<p>子进程释放不了pcb，必须由父进程释放</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">	pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">-1</span> ) &#123;</span><br><span class="line">        perror(<span class="string">"fork"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		 <span class="built_in">printf</span>(<span class="string">"I'm parent pid = %d, parentID = %d\n"</span>, getpid(), getppid());</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123;</span><br><span class="line">         sleep(<span class="number">1</span>);</span><br><span class="line">		 <span class="built_in">printf</span>(<span class="string">"child  pid = %d, parentID=%d \n"</span>, getpid(), getppid());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# ./wait_1 </span><br><span class="line">I'm parent pid = 11675, parentID = 1426</span><br><span class="line">root@kali:~/桌面# child  pid = 11676, parentID=1</span><br></pre></td></tr></table></figure>



<p>僵尸进程：</p>
<p>子进程结束，父进程还在，但父进程不释放子进程的pcb</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">pid_t</span> pid;</span><br><span class="line">	pid = fork();</span><br><span class="line">    <span class="keyword">if</span> (pid == <span class="number">-1</span> ) &#123;</span><br><span class="line">        perror(<span class="string">"fork"</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span>(<span class="number">1</span>) </span><br><span class="line">		&#123;</span><br><span class="line">			sleep(<span class="number">1</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"I'm parent pid = %d, parentID = %d\n"</span>, getpid(), getppid());</span><br><span class="line">		&#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (pid == <span class="number">0</span>) &#123; </span><br><span class="line">		 <span class="built_in">printf</span>(<span class="string">"child  pid = %d, parentID=%d\n"</span>, getpid(), getppid());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<p>wait（int *status）</p>
<p>函数作用：</p>
<p>1.阻塞并等待子进程退出</p>
<p>2.回收子进程残留资源</p>
<p>3.获取子进程结束状态（退出原因）</p>
<p>返回值：</p>
<p>成功：清理掉的子进程ID</p>
<p>失败：-1（没有子进程）</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">pid_t</span> pid, wpid;</span><br><span class="line">	<span class="keyword">int</span> status;</span><br><span class="line">	pid = fork();</span><br><span class="line">	<span class="keyword">if</span>(pid == <span class="number">-1</span>)&#123;</span><br><span class="line">		perror(<span class="string">"fork error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(pid == <span class="number">0</span>)&#123;		<span class="comment">//son</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"I'm process child, pid = %d\n"</span>, getpid());</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> 1</span></span><br><span class="line">		execl(<span class="string">"./abnor"</span>, <span class="string">"abnor"</span>, <span class="literal">NULL</span>);</span><br><span class="line">		perror(<span class="string">"execl error"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">		sleep(<span class="number">1</span>);				</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">10</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="comment">//wpid = wait(NULL);	//传出参数</span></span><br><span class="line">		wpid = wait(&amp;status);	<span class="comment">//传出参数</span></span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(WIFEXITED(status))&#123;	<span class="comment">//非0 ---正常退出</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"I'm parent, The child process "</span></span><br><span class="line">					<span class="string">"%d exit normally\n"</span>, wpid);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"return value:%d\n"</span>, WEXITSTATUS(status));</span><br><span class="line"></span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status)) &#123;	<span class="comment">//非0 ----异常退出</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"The child process exit abnormally, "</span></span><br><span class="line">					<span class="string">"killed by signal %d\n"</span>, WTERMSIG(status));</span><br><span class="line">										<span class="comment">//获取信号编号</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"other...\n"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> *p = <span class="string">"test of wait abnormally\n"</span>;</span><br><span class="line"><span class="comment">//    p[0] = 'h';</span></span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">5</span>/<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">56</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# ./wait</span><br><span class="line">I'm process child, pid = 12083</span><br><span class="line">The child process exit abnormally, killed by signal 8</span><br></pre></td></tr></table></figure>





<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/wait.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">pid_t</span> pid,wpid;       <span class="comment">//进程标识符</span></span><br><span class="line"> 	<span class="keyword">int</span> status;</span><br><span class="line">	pid = fork();     <span class="comment">//创建一个新的进程</span></span><br><span class="line">	<span class="keyword">if</span>(pid&lt;<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"创建进程失败!"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> <span class="keyword">if</span>(pid==<span class="number">0</span>)   <span class="comment">//子进程1</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"----子进程1----进程标识符是%d\n"</span>,getpid());</span><br><span class="line">		execl(<span class="string">"/bin/ls"</span>,<span class="string">"ls"</span>,<span class="string">"-1"</span>,<span class="string">"-color"</span>,<span class="literal">NULL</span>);</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"exec failed!\n"</span>);</span><br><span class="line">		<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span>          <span class="comment">//否则为父进程</span></span><br><span class="line">	&#123;</span><br><span class="line">		pid = fork();<span class="comment">//创建新进程</span></span><br><span class="line">		<span class="keyword">if</span>(pid&lt;<span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"创建进程失败!"</span>);</span><br><span class="line">			<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(pid==<span class="number">0</span>)   <span class="comment">//子进程2</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"----子进程2----进程标识符是%d\n"</span>,getpid());</span><br><span class="line">			execl(<span class="string">"/bin/ls"</span>,<span class="string">"ls"</span>,<span class="string">"-l"</span>,<span class="string">"-color"</span>,<span class="literal">NULL</span>);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"exec failed!\n"</span>);</span><br><span class="line">			<span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span>          <span class="comment">//否则为父进程</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//wait(NULL); //对退出状态不关注，等待子进程退出</span></span><br><span class="line">			wpid = wait(&amp;status);	<span class="comment">//传出参数</span></span><br><span class="line">	    	<span class="keyword">if</span>(WIFEXITED(status))</span><br><span class="line">			&#123;	<span class="comment">//非0 ---正常退出</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"I'm parent, The child process "</span></span><br><span class="line">					<span class="string">"%d exit normally\n"</span>, wpid);</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"return value:%d\n"</span>, WEXITSTATUS(status));</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"父进程,进程标识符是%d\n"</span>,getpid());</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"完成！\n"</span>);</span><br><span class="line">			<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (WIFSIGNALED(status)) &#123;	<span class="comment">//非0 ----异常退出</span></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"The child process exit abnormally, "</span></span><br><span class="line">					<span class="string">"killed by signal %d\n"</span>, WTERMSIG(status));</span><br><span class="line">										<span class="comment">//获取信号编号</span></span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"other...\n"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		&#125;     </span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~# ./chj</span><br><span class="line">----子进程1----进程标识符是14091</span><br><span class="line">----子进程2----进程标识符是14092</span><br><span class="line">总用量 62160</span><br><span class="line">drwxr-xr-x 11 root     4096 4月   2 20:35 sqlmap</span><br><span class="line">-rw-r--r--  1 root      959 5月   2 15:50 process_sum.c</span><br><span class="line">-rwxr-xr-x  1 root    16928 5月   2 15:50 process_sum</span><br><span class="line">-rw-r--r--  1 root     1058 5月   2 16:12 jinchen.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:12 jinchen</span><br><span class="line">-rw-r--r--  1 root 63455210 4月   2 20:49 google-chrome-stable_current_amd64.deb</span><br><span class="line">-rw-r--r--  1 root     1507 5月   2 16:38 chj.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:38 chj</span><br><span class="line">总用量 62160</span><br><span class="line">drwxr-xr-x  9 root     4096 4月  25 10:49 antSword</span><br><span class="line">drwxr-xr-x  5 root    36864 5月   2 15:31 桌面</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 音乐</span><br><span class="line">drwxr-xr-x  3 root     4096 4月  25 11:01 下载</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 文档</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 图片</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 视频</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 模板</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 公共</span><br><span class="line">-rw-r--r--  1 root      985 5月   2 16:00 12.c</span><br><span class="line">-rw-r--r--  1 root      971 5月   2 16:12 123.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:12 123</span><br><span class="line">drwxr-xr-x 11 root     4096 4月   2 20:35 sqlmap</span><br><span class="line">-rwxr-xr-x  1 root    16912 5月   2 16:00 12</span><br><span class="line">-rw-r--r--  1 root      959 5月   2 15:50 process_sum.c</span><br><span class="line">-rwxr-xr-x  1 root    16928 5月   2 15:50 process_sum</span><br><span class="line">-rw-r--r--  1 root     1058 5月   2 16:12 jinchen.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:12 jinchen</span><br><span class="line">-rw-r--r--  1 root 63455210 4月   2 20:49 google-chrome-stable_current_amd64.deb</span><br><span class="line">-rw-r--r--  1 root     1507 5月   2 16:38 chj.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:38 chj</span><br><span class="line">drwxr-xr-x  9 root     4096 4月  25 10:49 antSword</span><br><span class="line">drwxr-xr-x  5 root    36864 5月   2 15:31 桌面</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 音乐</span><br><span class="line">drwxr-xr-x  3 root     4096 4月  25 11:01 下载</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 文档</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 图片</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 视频</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 模板</span><br><span class="line">drwxr-xr-x  2 root     4096 4月   1 19:21 公共</span><br><span class="line">-rw-r--r--  1 root      985 5月   2 16:00 12.c</span><br><span class="line">-rw-r--r--  1 root      971 5月   2 16:12 123.c</span><br><span class="line">-rwxr-xr-x  1 root    16920 5月   2 16:12 123</span><br><span class="line">-rwxr-xr-x  1 root    16912 5月   2 16:00 12</span><br><span class="line">I'm parent, The child process 14092 exit normally</span><br><span class="line">return value:0</span><br><span class="line">父进程,进程标识符是14090</span><br><span class="line">完成！</span><br></pre></td></tr></table></figure>





<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">创建进程使用fork()函数，执行进程使用exec函数族，终止进程则使用exit()和_exit()函数</span><br><span class="line"></span><br><span class="line">总结了wait的5个知识点：</span><br><span class="line"></span><br><span class="line">&lt;1&gt;.僵尸进程：在一个进程调用了exit之后，该进程并非马上消失还留下一些参与的信息</span><br><span class="line"></span><br><span class="line">&lt;2&gt;.用wait结束僵尸进程.</span><br><span class="line"></span><br><span class="line"> #include &lt;sys&#x2F;types.h&gt;</span><br><span class="line"></span><br><span class="line">#include &lt;sys&#x2F;wait.h&gt;</span><br><span class="line"></span><br><span class="line">pid_t wait (int *stutas)</span><br><span class="line"></span><br><span class="line">原理：进程一旦调用了wait，就立即阻塞自己，当分析到当前进程的子进程已经exit，便会收集这个子进程的信息，然后彻底销毁，如果没有找到这样的子进程，就会一直阻塞在这里，直到有一个出现。</span><br><span class="line"></span><br><span class="line">&lt;3&gt;.参数status</span><br><span class="line"></span><br><span class="line">在wait中，这是一个指向一个整型数据的指针，用来存放子进程退出时的状态，后来又定义了一个WIFEXITED（status)的宏来完成这项工作，这里的status就是一个指针指向的整数。</span><br><span class="line"></span><br><span class="line">&lt;4&gt;进程同步。wait可以解决进程的同步问题，通过wait（&amp;status）语句在父进程中等待子进程的返回值。</span><br><span class="line"></span><br><span class="line">&lt;5&gt;waitpid函数。其实，wait是waitpid的包装后的形式。waitpid有三个参数（pid，*status，options）</span><br><span class="line"></span><br><span class="line">pid&gt;0,只等待PID&#x3D;pid的子进程；&#x3D;0,等待同一进程组中的任何子进程；&#x3D;-1，等待任何子进程退出，此时&#x3D;wait；&lt;-1，等待指定进程组中的任何子进程</span><br><span class="line"></span><br><span class="line">options：WNOHANG|WUNTRACED，也可设为0，此时&#x3D;wait。</span><br><span class="line"></span><br><span class="line">返回值：1.正常返回子进程的PID；2.若设置了WNOHANG，可能返回0；3.error，返回-1。</span><br></pre></td></tr></table></figure>





<hr>
<h2 id="原始套接字编程"><a href="#原始套接字编程" class="headerlink" title="原始套接字编程"></a><strong>原始套接字编程</strong></h2><p>问题: 如何实现SYN扫描器扫描端口 , 比如AB两个设备要进行连接 , A通过端口发一个SYN包给B,B在收到后返回一个ACK包确认连接 , 但是在不确定B端口号时</p>
<p>该如何进行连接 , 答: A给B的每一个端都发一个SYN包, 如果哪个有返回说明端口是开放的, TCP和UDP都无法发实现这样的连接方式 , 所以要使用原始套接字</p>
<p><strong>1、创建一个原始套接字，并设置IP头选项</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SOCKET sock; </span><br><span class="line">sock = socket(AF_INET,SOCK_RAW,IPPROTO_IP);</span><br></pre></td></tr></table></figure>

<p>这里，我们设置了<strong>SOCK_RAW</strong>标志，表示我们声明的是一个原始套接字类型。创建原始套接字后，IP头就会包含在接收的数据中，如果我们设定 IP_HDRINCL 选项，那么，就需要自己来构造IP头。注意，如果设置IP_HDRINCL 选项，那么必须具有  administrator权限，</p>
<p><strong>有两种原始套接字：</strong><br>                  一种是处理IP层及其上的数据，通过指定socket第一个参数为<strong>AF_INET来创建这种套接字</strong>。<br>                  另一种是处理数据链路层及其上的数据，通过指定socket第一个参数为PF_PACKET来创建这种套接字</p>
<table>
<thead>
<tr>
<th><strong>SOCK_STREAM</strong></th>
<th><strong>面向连接的流式套接字</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>SOCK_DGRAM</strong></td>
<td><strong>面向无连接的数据包套接字</strong></td>
</tr>
<tr>
<td><strong>SOCK_RAW</strong></td>
<td><strong>接收底层数据报文的原始套接字</strong></td>
</tr>
</tbody></table>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/ip.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netinet/tcp.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;netdb.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> LOCALPORT 10329</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">send_tcp</span><span class="params">(<span class="keyword">int</span> sockfd,struct sockaddr_in *addr)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> short <span class="title">check_sum</span><span class="params">(<span class="keyword">unsigned</span> short *addr,<span class="keyword">int</span> len)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc,<span class="keyword">char</span> **argv)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> sockfd;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">addr</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">hostent</span> *<span class="title">host</span>;</span></span><br><span class="line">    <span class="keyword">int</span> on=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> destport=<span class="number">80</span>;</span><br><span class="line">    <span class="keyword">if</span>(argc&lt;<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\nUsage:%s hostIP port\n"</span>,argv[<span class="number">0</span>]);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    bzero(&amp;addr,<span class="keyword">sizeof</span>(struct sockaddr_in));</span><br><span class="line">    addr.sin_family=AF_INET;</span><br><span class="line">    <span class="keyword">if</span>(argc==<span class="number">3</span>)&#123;</span><br><span class="line">        destport=atoi(argv[<span class="number">2</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    addr.sin_port=htons(destport);</span><br><span class="line">    <span class="keyword">if</span>(inet_aton(argv[<span class="number">1</span>],&amp;addr.sin_addr)==<span class="number">0</span>)&#123;</span><br><span class="line">        host=gethostbyname(argv[<span class="number">1</span>]);</span><br><span class="line">        <span class="keyword">if</span>(host==<span class="literal">NULL</span>)&#123;</span><br><span class="line">            <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"HostName Error:%s\n\a"</span>,hstrerror(h_errno));</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        addr.sin_addr=*(struct in_addr *)(host-&gt;h_addr_list[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    sockfd=socket(AF_INET,SOCK_RAW,IPPROTO_TCP);</span><br><span class="line">    <span class="keyword">if</span>(sockfd&lt;<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(<span class="built_in">stderr</span>,<span class="string">"Socket Error:%s\n\a"</span>,strerror(errno));</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    setsockopt(sockfd,IPPROTO_IP,IP_HDRINCL,&amp;on,<span class="keyword">sizeof</span>(on));</span><br><span class="line">    setuid(getpid());</span><br><span class="line">    send_tcp(sockfd,&amp;addr);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">send_tcp</span><span class="params">(<span class="keyword">int</span> sockfd,struct sockaddr_in *addr)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> <span class="built_in">buffer</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">ip</span> *<span class="title">ip</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">tcphdr</span> *<span class="title">tcp</span>;</span></span><br><span class="line">    <span class="keyword">int</span> head_len;</span><br><span class="line"></span><br><span class="line">    head_len=<span class="keyword">sizeof</span>(struct ip)+<span class="keyword">sizeof</span>(struct tcphdr);</span><br><span class="line">    bzero(<span class="built_in">buffer</span>,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line">    ip=(struct ip *)<span class="built_in">buffer</span>;</span><br><span class="line">    ip-&gt;ip_v=IPVERSION;</span><br><span class="line">    ip-&gt;ip_hl=<span class="keyword">sizeof</span>(struct ip)&gt;&gt;<span class="number">2</span>;</span><br><span class="line">    ip-&gt;ip_tos=<span class="number">0</span>;</span><br><span class="line">    ip-&gt;ip_len=htons(head_len);</span><br><span class="line">    ip-&gt;ip_id=<span class="number">0</span>;</span><br><span class="line">    ip-&gt;ip_off=<span class="number">0</span>;</span><br><span class="line">    ip-&gt;ip_ttl=MAXTTL;</span><br><span class="line">    ip-&gt;ip_p=IPPROTO_TCP;</span><br><span class="line">    ip-&gt;ip_sum=<span class="number">0</span>;</span><br><span class="line">    ip-&gt;ip_dst=addr-&gt;sin_addr;</span><br><span class="line"></span><br><span class="line">    tcp=(struct tcphdr *)(<span class="built_in">buffer</span> + <span class="keyword">sizeof</span>(struct ip));</span><br><span class="line">    tcp-&gt;dest=addr-&gt;sin_port;</span><br><span class="line">    tcp-&gt;doff=<span class="number">5</span>;</span><br><span class="line">    tcp-&gt;syn=<span class="number">1</span>;</span><br><span class="line">    tcp-&gt;ack_seq=<span class="number">0</span>;</span><br><span class="line">    tcp-&gt;check=<span class="number">0</span>;</span><br><span class="line">    tcp-&gt;seq=<span class="built_in">random</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> count=<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        ip-&gt;ip_src.s_addr=<span class="built_in">random</span>();</span><br><span class="line">        tcp-&gt;source=<span class="built_in">random</span>();<span class="comment">//htons(LOCALPORT);//</span></span><br><span class="line">        <span class="keyword">if</span>(count%<span class="number">10000</span>==<span class="number">0</span>) <span class="built_in">printf</span>(<span class="string">"Send %d packets\n"</span>,count);</span><br><span class="line">        count++;</span><br><span class="line">        tcp-&gt;check=check_sum((<span class="keyword">unsigned</span> short *)tcp,<span class="keyword">sizeof</span>(struct tcphdr));</span><br><span class="line">        sendto(sockfd,<span class="built_in">buffer</span>,head_len,<span class="number">0</span>,addr,<span class="keyword">sizeof</span>(struct sockaddr_in));</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">unsigned</span> short <span class="title">check_sum</span><span class="params">(<span class="keyword">unsigned</span> short *addr,<span class="keyword">int</span> len)</span></span>&#123;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">int</span> nleft=len;</span><br><span class="line">    <span class="keyword">register</span> <span class="keyword">int</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">register</span> short *w=addr;</span><br><span class="line">    short answer=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(nleft&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        sum+=*w++;</span><br><span class="line">        nleft-=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(nleft==<span class="number">1</span>)&#123;</span><br><span class="line">        *(<span class="keyword">unsigned</span> <span class="keyword">char</span> *)(&amp;answer)=*(<span class="keyword">unsigned</span> <span class="keyword">char</span> *)w;</span><br><span class="line">        sum+=answer;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    sum=(sum&gt;&gt;<span class="number">16</span>)+(sum&amp;<span class="number">0xffff</span>);</span><br><span class="line">    sum+=(sum&gt;&gt;<span class="number">16</span>);</span><br><span class="line">    answer=~sum;</span><br><span class="line">    <span class="keyword">return</span>(answer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<hr>
<h2 id="Vim编辑器开发环境设置"><a href="#Vim编辑器开发环境设置" class="headerlink" title="Vim编辑器开发环境设置"></a><strong>Vim编辑器开发环境设置</strong></h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br></pre></td><td class="code"><pre><span class="line">root@kali:~/桌面# cat ~/.vimrc </span><br><span class="line">" Vundle Setting</span><br><span class="line"></span><br><span class="line">set nocompatible</span><br><span class="line">filetype off</span><br><span class="line">set rtp+=~/.vim/bundle/Vundle.vim</span><br><span class="line">call vundle#begin()</span><br><span class="line">Plugin 'VundleVim/Vundle.vim'</span><br><span class="line">"# Plugin 'git://github.com/scrooloose/nerdtree.git'</span><br><span class="line">"# Plugin 'git://github.com/kien/ctrlp.vim.git'</span><br><span class="line">Plugin 'scrooloose/nerdtree'</span><br><span class="line">" Let Vundle manage itself</span><br><span class="line">" Plugins</span><br><span class="line"> Plugin 'Valloric/YouCompleteMe'</span><br><span class="line"> Plugin 'scrooloose/syntastic'</span><br><span class="line"> Plugin 'bling/vim-airline'</span><br><span class="line"> Plugin 'SirVer/ultisnips'</span><br><span class="line"> Plugin 'edsono/vim-matchit'</span><br><span class="line"> Plugin 'elzr/vim-json'</span><br><span class="line"> Plugin 'honza/vim-snippets'</span><br><span class="line"> Plugin 'justinmk/vim-sneak'</span><br><span class="line"> Plugin 'kien/ctrlp.vim'</span><br><span class="line"> Plugin 'ludovicchabant/vim-lawrencium'</span><br><span class="line"> Plugin 'majutsushi/tagbar'</span><br><span class="line"> Plugin 'mhinz/vim-signify'</span><br><span class="line"> Plugin 'plasticboy/vim-markdown'</span><br><span class="line"> Plugin 'scrooloose/nerdcommenter'</span><br><span class="line"> Plugin 'sjl/gundo.vim'</span><br><span class="line"> Plugin 'tpope/vim-sleuth'</span><br><span class="line"> Plugin 'tpope/vim-surround'</span><br><span class="line"> Plugin 'tpope/vim-fugitive'</span><br><span class="line"> Plugin 'tyru/open-browser.vim'</span><br><span class="line"> Plugin 'vim-scripts/a.vim'</span><br><span class="line"></span><br><span class="line">" Color schemes</span><br><span class="line"> Plugin 'tomasr/molokai'</span><br><span class="line"> Plugin 'flazz/vim-colorschemes'</span><br><span class="line"></span><br><span class="line"> call vundle#end()</span><br><span class="line">filetype plugin indent on</span><br><span class="line"></span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">" =&gt; YouCompleteMe  代码自动补全  Begin</span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line"></span><br><span class="line">" 自动补全配置</span><br><span class="line">set completeopt=longest,menu "让Vim的补全菜单行为与一般IDE一致(参考VimTip1228)</span><br><span class="line">autocmd InsertLeave * if pumvisible() == 0|pclose|endif "离开插入模式后自动关闭预览窗口</span><br><span class="line">inoremap &lt;expr&gt; &lt;CR&gt;       pumvisible() ? "\&lt;C-y&gt;" : "\&lt;CR&gt;" "回车即选中当前项</span><br><span class="line">"上下左右键的行为 会显示其他信息</span><br><span class="line">inoremap &lt;expr&gt; &lt;Down&gt;     pumvisible() ? "\&lt;C-n&gt;" : "\&lt;Down&gt;"</span><br><span class="line">inoremap &lt;expr&gt; &lt;Up&gt;       pumvisible() ? "\&lt;C-p&gt;" : "\&lt;Up&gt;"</span><br><span class="line">inoremap &lt;expr&gt; &lt;PageDown&gt; pumvisible() ? "\&lt;PageDown&gt;\&lt;C-p&gt;\&lt;C-n&gt;" : "\&lt;PageDown&gt;"</span><br><span class="line">inoremap &lt;expr&gt; &lt;PageUp&gt;   pumvisible() ? "\&lt;PageUp&gt;\&lt;C-p&gt;\&lt;C-n&gt;" : "\&lt;PageUp&gt;"</span><br><span class="line">"youcompleteme  默认tab  s-tab 和自动补全冲突</span><br><span class="line">"let g:ycm_key_list_select_completion=['&lt;c-n&gt;']</span><br><span class="line">"let g:ycm_key_list_select_completion = ['&lt;Down&gt;']</span><br><span class="line">"let g:ycm_key_list_previous_completion=['&lt;c-p&gt;']</span><br><span class="line">"let g:ycm_key_list_previous_completion = ['&lt;Up&gt;']</span><br><span class="line">let g:ycm_confirm_extra_conf=0 "关闭加载.ycm_extra_conf.py提示</span><br><span class="line">let g:ycm_collect_identifiers_from_tags_files=1 " 开启 YCM 基于标签引擎</span><br><span class="line">let g:ycm_min_num_of_chars_for_completion=1 " 从第2个键入字符就开始罗列匹配项</span><br><span class="line">let g:ycm_cache_omnifunc=0 " 禁止缓存匹配项,每次都重新生成匹配项</span><br><span class="line">let g:ycm_seed_identifiers_with_syntax=1 " 语法关键字补全</span><br><span class="line">nnoremap &lt;F5&gt; :YcmForceCompileAndDiagnostics&lt;CR&gt; "force recomile with syntastic</span><br><span class="line">"nnoremap &lt;leader&gt;lo :lopen&lt;CR&gt; "open locationlist</span><br><span class="line">"nnoremap &lt;leader&gt;lc :lclose&lt;CR&gt; "close locationlist</span><br><span class="line">inoremap &lt;leader&gt;&lt;leader&gt; &lt;C-x&gt;&lt;C-o&gt;</span><br><span class="line">"在注释输入中也能补全</span><br><span class="line">let g:ycm_complete_in_comments = 1</span><br><span class="line">"在字符串输入中也能补全</span><br><span class="line">let g:ycm_complete_in_strings = 1</span><br><span class="line">"注释和字符串中的文字也会被收入补全</span><br><span class="line">let g:ycm_collect_identifiers_from_comments_and_strings = 0</span><br><span class="line">nnoremap &lt;leader&gt;jd :YcmCompleter GoToDefinitionElseDeclaration&lt;CR&gt; " 跳转到定义处</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">"为了Python3的第三方库安装Jedi插件</span><br><span class="line">Plugin 'davidhalter/jedi-vim'</span><br><span class="line">"===============================Jedi==================================</span><br><span class="line">if has('python3')</span><br><span class="line">let g:loaded_youcompleteme = 1 " 判断如果是python3的话，就禁用ycmd。</span><br><span class="line">let g:jedi#force_py_version = 3</span><br><span class="line">let g:pymode_python = 'python3'</span><br><span class="line">endif</span><br><span class="line">"===============================Jedi===================================</span><br><span class="line"></span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">" =&gt; YouCompleteMe  代码自动补全  End</span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line"></span><br><span class="line">" 设置配色方案</span><br><span class="line">" colorscheme torte</span><br><span class="line">" colorscheme murphy</span><br><span class="line">" colorscheme desert </span><br><span class="line"></span><br><span class="line">"字体 </span><br><span class="line">"if (has("gui_running")) </span><br><span class="line">"   set guifont=Bitstream\ Vera\ Sans\ Mono\ 10 </span><br><span class="line">"endif </span><br><span class="line"></span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">" 显示相关  </span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">set shortmess=atI   " 启动的时候不显示那个援助乌干达儿童的提示  </span><br><span class="line">"winpos 5 5          " 设定窗口位置  </span><br><span class="line">"set lines=40 columns=155    " 设定窗口大小  </span><br><span class="line">set go=             " 不要图形按钮  </span><br><span class="line">"color asmanian2     " 设置背景主题  </span><br><span class="line">"set guifont=Courier_New:h10:cANSI   " 设置字体  </span><br><span class="line">syntax on           " 语法高亮  </span><br><span class="line">autocmd InsertLeave * se nocul  " 用浅色高亮当前行  </span><br><span class="line">autocmd InsertEnter * se cul    " 用浅色高亮当前行  </span><br><span class="line">set ruler           " 显示标尺  </span><br><span class="line">set showcmd         " 输入的命令显示出来，看的清楚些  </span><br><span class="line">set cmdheight=1     " 命令行（在状态行下）的高度，设置为1  </span><br><span class="line">set whichwrap+=&lt;,&gt;,h,l   " 允许backspace和光标键跨越行边界(不建议)  </span><br><span class="line">set scrolloff=3     " 光标移动到buffer的顶部和底部时保持3行距离  </span><br><span class="line">set novisualbell    " 不要闪烁(不明白)  </span><br><span class="line">set statusline=%F%m%r%h%w\ [FORMAT=%&#123;&amp;ff&#125;]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %&#123;strftime(\"%d/%m/%y\ -\ %H:%M\")&#125;   "状态行显示的内容  </span><br><span class="line">set laststatus=1    " 启动显示状态行(1),总是显示状态行(2)  </span><br><span class="line">"set foldenable      " 允许折叠  </span><br><span class="line">set foldmethod=manual   " 手动折叠  </span><br><span class="line">"set background=dark "背景使用黑色 </span><br><span class="line">" 显示中文帮助</span><br><span class="line">if version &gt;= 603</span><br><span class="line">    set helplang=cn</span><br><span class="line">    set encoding=utf-8</span><br><span class="line">endif</span><br><span class="line"></span><br><span class="line">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">"""""新文件标题</span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">"新建.c,.h,.sh,.java文件，自动插入文件头 </span><br><span class="line">autocmd BufNewFile *.cpp,*.[ch],*.sh,*.java exec ":call SetTitle()" </span><br><span class="line">""定义函数SetTitle，自动插入文件头 </span><br><span class="line">func SetTitle() </span><br><span class="line">    "如果文件类型为.sh文件 </span><br><span class="line">    if &amp;filetype == 'sh' </span><br><span class="line">    call setline(1,"\#########################################################################") </span><br><span class="line">    call append(line("."), "\# File Name: ".expand("%")) </span><br><span class="line">    call append(line(".")+1, "\# Author: Function_Dou") </span><br><span class="line">    call append(line(".")+2, "\# mail: NOT") </span><br><span class="line">    call append(line(".")+3, "\# Created Time: ".strftime("%c")) </span><br><span class="line">    call append(line(".")+4, "\#########################################################################") </span><br><span class="line">    call append(line(".")+5, "\#!/bin/bash") </span><br><span class="line">    call append(line(".")+6, "") </span><br><span class="line">    else </span><br><span class="line">    call setline(1, "/*************************************************************************") </span><br><span class="line">    call append(line("."), "    &gt; File Name: ".expand("%")) </span><br><span class="line">    call append(line(".")+1, "    &gt; Author: Function_Dou") </span><br><span class="line">    call append(line(".")+2, "    &gt; Mail: NOT") </span><br><span class="line">    call append(line(".")+3, "    &gt; Created Time: ".strftime("%c")) </span><br><span class="line">    call append(line(".")+4, " ************************************************************************/") </span><br><span class="line">    call append(line(".")+5, "")</span><br><span class="line">    endif</span><br><span class="line">    if &amp;filetype == 'cpp'</span><br><span class="line">    call append(line(".")+6, "#include &lt;stdio.h&gt;")</span><br><span class="line">   "call append(line(".")+7, " ")</span><br><span class="line">   "call append(line(".")+8, "")</span><br><span class="line">    endif</span><br><span class="line">    if &amp;filetype == 'c'</span><br><span class="line">    call append(line(".")+6, "#include &lt;stdio.h&gt;")</span><br><span class="line">    call append(line(".")+7, "")</span><br><span class="line">    endif</span><br><span class="line">    "    if &amp;filetype == 'java'</span><br><span class="line">    "        call append(line(".")+6,"public class ".expand("%"))</span><br><span class="line">    "        call append(line(".")+7,"")</span><br><span class="line">    "    endif</span><br><span class="line">    "新建文件后，自动定位到文件末尾</span><br><span class="line">    autocmd BufNewFile * normal G</span><br><span class="line">endfunc </span><br><span class="line"></span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">"键盘命令</span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">nmap &lt;leader&gt;w :w!&lt;cr&gt;</span><br><span class="line">nmap &lt;leader&gt;f :find&lt;cr&gt;</span><br><span class="line">" 映射全选+复制 ctrl+a</span><br><span class="line">map &lt;C-A&gt; ggVGY</span><br><span class="line">map! &lt;C-A&gt; &lt;Esc&gt;ggVGY</span><br><span class="line">map &lt;F12&gt; gg=G</span><br><span class="line">" 选中状态下 Ctrl+c 复制</span><br><span class="line">vmap &lt;C-c&gt; "+y</span><br><span class="line">"去空行  </span><br><span class="line">nnoremap &lt;F4&gt; :g/^\s*$/d&lt;CR&gt; </span><br><span class="line">"比较文件  </span><br><span class="line">nnoremap &lt;C-F4&gt; :vert diffsplit </span><br><span class="line">"新建标签  </span><br><span class="line">map &lt;M-F4&gt; :tabnew&lt;CR&gt;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">" vim-scripts 中的插件 "</span><br><span class="line">Plugin 'taglist.vim'</span><br><span class="line">"ctags 配置:F3快捷键显示程序中的各种tags，包括变量和函数等。</span><br><span class="line">map &lt;F3&gt; :TlistToggle&lt;CR&gt;</span><br><span class="line">let Tlist_Use_Right_Window=1</span><br><span class="line">let Tlist_Show_One_File=1</span><br><span class="line">let Tlist_Exit_OnlyWindow=1</span><br><span class="line">let Tlist_WinWidt=25</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">"列出当前目录文件  </span><br><span class="line">"map &lt;F2&gt; :tabnew .&lt;CR&gt;  </span><br><span class="line">"打开树状文件目录  </span><br><span class="line">"map &lt;C-F2&gt; \be  </span><br><span class="line"></span><br><span class="line">""将F3设置为开关NERDTree的快捷键</span><br><span class="line">"map &lt;F2&gt; :NERDTreeMirror&lt;CR&gt;</span><br><span class="line">map &lt;F2&gt; :NERDTreeToggle .&lt;CR&gt;</span><br><span class="line">""修改树的显示图标</span><br><span class="line">let g:NERDTreeDirArrowExpandable = '+'</span><br><span class="line">let g:NERDTreeDirArrowCollapsible = '-'</span><br><span class="line">""窗口位置</span><br><span class="line">let g:NERDTreeWinPos='left'</span><br><span class="line">""窗口尺寸</span><br><span class="line">let g:NERDTreeSize=30</span><br><span class="line">""窗口是否显示行号</span><br><span class="line">let g:NERDTreeShowLineNumbers=1</span><br><span class="line">""不显示隐藏文件</span><br><span class="line">let g:NERDTreeHidden=0</span><br><span class="line">""打开vim时如果没有文件自动打开NERDTree</span><br><span class="line">"autocmd vimenter * if !argc()|NERDTree|endif</span><br><span class="line">""当NERDTree为剩下的唯一窗口时自动关闭</span><br><span class="line">"autocmd bufenter * if (winnr("$") == 1 &amp;&amp; exists("b:NERDTree") &amp;&amp; b:NERDTree.isTabTree()) | q | endif</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">"C，C++ 按F5编译运行</span><br><span class="line">map &lt;F5&gt; :call CompileRunGcc()&lt;CR&gt;</span><br><span class="line">func! CompileRunGcc()</span><br><span class="line">    exec "w"</span><br><span class="line">    if &amp;filetype == 'c'</span><br><span class="line">    exec "!g++ % -o %&lt;"</span><br><span class="line">    exec "! ./%&lt;"</span><br><span class="line">    elseif &amp;filetype == 'cpp'</span><br><span class="line">    exec "!g++ % -o %&lt;"</span><br><span class="line">    exec "! ./%&lt;"</span><br><span class="line">    elseif &amp;filetype == 'java' </span><br><span class="line">    exec "!javac %" </span><br><span class="line">    exec "!java %&lt;"</span><br><span class="line">    elseif &amp;filetype == 'sh'</span><br><span class="line">    :!./%</span><br><span class="line">    elseif &amp;filetype == 'py'</span><br><span class="line">    exec "!python %"</span><br><span class="line">    exec "!python %&lt;"</span><br><span class="line">    endif</span><br><span class="line">endfunc</span><br><span class="line">"C,C++的调试</span><br><span class="line">map &lt;F8&gt; :call Rungdb()&lt;CR&gt;</span><br><span class="line">func! Rungdb()</span><br><span class="line">    exec "w"</span><br><span class="line">    exec "!g++ % -g -o %&lt;"</span><br><span class="line">    exec "!gdb ./%&lt;"</span><br><span class="line">endfunc</span><br><span class="line"></span><br><span class="line">""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">""实用设置</span><br><span class="line">"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""</span><br><span class="line">" 设置当文件被改动时自动载入</span><br><span class="line">set autoread</span><br><span class="line">" quickfix模式</span><br><span class="line">autocmd FileType c,cpp map &lt;buffer&gt; &lt;leader&gt;&lt;space&gt; :w&lt;cr&gt;:make&lt;cr&gt;</span><br><span class="line">"代码补全 </span><br><span class="line">set completeopt=preview,menu </span><br><span class="line">" set completeopt=longest,menu</span><br><span class="line">"允许插件  </span><br><span class="line">filetype plugin on</span><br><span class="line">"共享剪贴板  </span><br><span class="line">set clipboard+=unnamed </span><br><span class="line">"从不备份  </span><br><span class="line">set nobackup</span><br><span class="line">"make 运行</span><br><span class="line">:set makeprg=g++\ -Wall\ \ %</span><br><span class="line">"自动保存</span><br><span class="line">set autowrite</span><br><span class="line">set ruler                   " 打开状态栏标尺</span><br><span class="line">set cursorline              " 突出显示当前行</span><br><span class="line">set magic                   " 设置魔术</span><br><span class="line">set guioptions-=T           " 隐藏工具栏</span><br><span class="line">set guioptions-=m           " 隐藏菜单栏</span><br><span class="line">"set statusline=\ %&lt;%F[%1*%M%*%n%R%H]%=\ %y\ %0(%&#123;&amp;fileformat&#125;\ %&#123;&amp;encoding&#125;\ %c:%l/%L%)\</span><br><span class="line">" 设置在状态行显示的信息</span><br><span class="line">set foldcolumn=0</span><br><span class="line">set foldmethod=indent </span><br><span class="line">set foldlevel=3 </span><br><span class="line">set foldenable              " 开始折叠</span><br><span class="line">" 不要使用vi的键盘模式，而是vim自己的</span><br><span class="line">set nocompatible</span><br><span class="line">" 语法高亮</span><br><span class="line">set syntax=on</span><br><span class="line">" 去掉输入错误的提示声音</span><br><span class="line">set noeb</span><br><span class="line">" 在处理未保存或只读文件的时候，弹出确认</span><br><span class="line">set confirm</span><br><span class="line">" 自动缩进</span><br><span class="line">set autoindent</span><br><span class="line">set cindent</span><br><span class="line">" Tab键的宽度</span><br><span class="line">set tabstop=4</span><br><span class="line">" 统一缩进为4</span><br><span class="line">set softtabstop=4</span><br><span class="line">set shiftwidth=4</span><br><span class="line">" 不要用空格代替制表符</span><br><span class="line">set noexpandtab</span><br><span class="line">" 在行和段开始处使用制表符</span><br><span class="line">set smarttab</span><br><span class="line">" 显示行号</span><br><span class="line">set number</span><br><span class="line">" 历史记录数</span><br><span class="line">set history=1000</span><br><span class="line">"禁止生成临时文件</span><br><span class="line">set nobackup</span><br><span class="line">set noswapfile</span><br><span class="line">"搜索忽略大小写</span><br><span class="line">set ignorecase</span><br><span class="line">"搜索逐字符高亮</span><br><span class="line">set hlsearch</span><br><span class="line">set incsearch</span><br><span class="line">"行内替换</span><br><span class="line">set gdefault</span><br><span class="line">"编码设置</span><br><span class="line">set enc=utf-8</span><br><span class="line">set fencs=utf-8,ucs-bom,shift-jis,gb18030,gbk,gb2312,cp936</span><br><span class="line">"语言设置</span><br><span class="line">set langmenu=zh_CN.UTF-8</span><br><span class="line">set helplang=cn</span><br><span class="line">" 我的状态行显示的内容（包括文件类型和解码）</span><br><span class="line">"set statusline=%F%m%r%h%w\ [FORMAT=%&#123;&amp;ff&#125;]\ [TYPE=%Y]\ [POS=%l,%v][%p%%]\ %&#123;strftime(\"%d/%m/%y\ -\ %H:%M\")&#125;</span><br><span class="line">"set statusline=[%F]%y%r%m%*%=[Line:%l/%L,Column:%c][%p%%]</span><br><span class="line">" 总是显示状态行</span><br><span class="line">set laststatus=2</span><br><span class="line">" 命令行（在状态行下）的高度，默认为1，这里是2</span><br><span class="line">set cmdheight=2</span><br><span class="line">" 侦测文件类型</span><br><span class="line">filetype on</span><br><span class="line">" 载入文件类型插件</span><br><span class="line">filetype plugin on</span><br><span class="line">" 为特定文件类型载入相关缩进文件</span><br><span class="line">filetype indent on</span><br><span class="line">" 保存全局变量</span><br><span class="line">set viminfo+=!</span><br><span class="line">" 带有如下符号的单词不要被换行分割</span><br><span class="line">set iskeyword+=_,$,@,%,#,-</span><br><span class="line">" 字符间插入的像素行数目</span><br><span class="line">set linespace=0</span><br><span class="line">" 增强模式中的命令行自动完成操作</span><br><span class="line">set wildmenu</span><br><span class="line">" 使回格键（backspace）正常处理indent, eol, start等</span><br><span class="line">set backspace=2</span><br><span class="line">" 允许backspace和光标键跨越行边界</span><br><span class="line">set whichwrap+=&lt;,&gt;,h,l</span><br><span class="line">" 可以在buffer的任何地方使用鼠标（类似office中在工作区双击鼠标定位）</span><br><span class="line">set mouse=a</span><br><span class="line">set selection=exclusive</span><br><span class="line">set selectmode=mouse,key</span><br><span class="line">" 通过使用: commands命令，告诉我们文件的哪一行被改变过</span><br><span class="line">set report=0</span><br><span class="line">" 在被分割的窗口间显示空白，便于阅读</span><br><span class="line">set fillchars=vert:\ ,stl:\ ,stlnc:\</span><br><span class="line">" 高亮显示匹配的括号</span><br><span class="line">set showmatch</span><br><span class="line">" 匹配括号高亮的时间（单位是十分之一秒）</span><br><span class="line">set matchtime=1</span><br><span class="line">" 光标移动到buffer的顶部和底部时保持3行距离</span><br><span class="line">set scrolloff=3</span><br><span class="line">" 为C程序提供自动缩进</span><br><span class="line">set smartindent</span><br><span class="line">" 高亮显示普通txt文件（需要txt.vim脚本）</span><br><span class="line">au BufRead,BufNewFile *  setfiletype txt</span><br><span class="line">"自动补全</span><br><span class="line">:inoremap ( ()&lt;ESC&gt;i</span><br><span class="line">:inoremap ) &lt;c-r&gt;=ClosePair(')')&lt;CR&gt;</span><br><span class="line">":inoremap &#123; &#123;&lt;CR&gt;&#125;&lt;ESC&gt;O</span><br><span class="line">":inoremap &#125; &lt;c-r&gt;=ClosePair('&#125;')&lt;CR&gt;</span><br><span class="line">:inoremap [ []&lt;ESC&gt;i</span><br><span class="line">:inoremap ] &lt;c-r&gt;=ClosePair(']')&lt;CR&gt;</span><br><span class="line">:inoremap " ""&lt;ESC&gt;i</span><br><span class="line">:inoremap ' ''&lt;ESC&gt;i</span><br><span class="line">function! ClosePair(char)</span><br><span class="line">    if getline('.')[col('.') - 1] == a:char</span><br><span class="line">    return "\&lt;Right&gt;"</span><br><span class="line">    else</span><br><span class="line">    return a:char</span><br><span class="line">    endif</span><br><span class="line">endfunction</span><br><span class="line">filetype plugin indent on </span><br><span class="line">"打开文件类型检测, 加了这句才可以用智能补全</span><br><span class="line">set completeopt=longest,menu</span><br><span class="line"></span><br><span class="line">" ctages 插件</span><br><span class="line">set tags=/home/rpz/tags</span><br></pre></td></tr></table></figure>








      
      <!-- reward -->
      
      <div id="reward-btn">
        打赏
      </div>
      
    </div>
    
    
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>版权声明： </strong s>
              本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        Share
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://cumtchen.gitee.io/2020/03/06/Linux/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>
      
      

    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2020/03/12/python%E6%B8%97%E9%80%8F%E4%B9%8B%E8%B7%AF/" class="article-nav-link">
        <strong class="article-nav-caption">Newer posts</strong>
        <div class="article-nav-title">
          
            python渗透之路
          
        </div>
      </a>
    
    
      <a href="/2020/02/18/%E7%AE%80%E5%8D%95%E6%90%AD%E5%BB%BA%E4%B8%AA%E5%B1%9E%E4%BA%8E%E4%BD%A0%E7%9A%84%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" class="article-nav-link">
        <strong class="article-nav-caption">Older posts</strong>
        <div class="article-nav-title">简单搭建个属于你的个人博客</div>
      </a>
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        app_id: '6tKR3VfNf8sE102pp4QlkOSM-gzGzoHsz',
        app_key: 'OVsjODdU2QixblMDCtzmEfYS',
        path: window.location.pathname,
        notify: '',
        verify: 'false',
        avatar: 'mp',
        placeholder: '给我的文章加点建议吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2020
        0Rld
      </li>
      <li>
        
          Powered by
        
        
        <a href="https://hexo.io" target="_blank">Hexo</a> Theme <a href="https://github.com/Shen-Yu/hexo-theme-ayer" target="_blank">Ayer</a>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src=''></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/1.jpg" alt="0Rld"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/about">About</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>Buy me a cup of coffee~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<script src="/js/share.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['四季更替，梦境更迭','生活,旅行,思考,代码,博客','努力一定会有所获！'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: true
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>



<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>